!function(a){a.fn.witchValidate=function(i){function t(){var i=0;for(var t in s){var n=s[t],r=a(t);n.focusMsg&&n.errMsg&&(r.data("validate",n),r.focus(function(){a.fn.witchValidate.addTips(a(this),"focusMsg")}),r.blur(function(){e(a(this))})),i++}}function e(i){var t=i.data("validate"),e=t.must,n=!0,d=a.trim(i.val());if(e||!e&&""!==d){if(""==d)return a.fn.witchValidate.addTips(i,"errMsg"),void 0;if(t.comp&&d!==a.trim(a(t.comp).val()))return n=!1,a.fn.witchValidate.addTips(i,"compMsg"),void 0;if(t.minLength||t.maxLength){t.minLength=void 0==t.minLength?1:t.minLength,t.maxLength=void 0==t.maxLength?1e5:t.maxLength;var s=d.replace(/[^\x00-\xff]/g,"rr").length;if(!(s>=t.minLength&&s<=t.maxLength))return n=!1,a.fn.witchValidate.addTips(i,"errMsg"),void 0}if(t.reg)if("string"==typeof t.reg){if(!r[t.reg].test(d))return n=!1,a.fn.witchValidate.addTips(i,"errMsg"),void 0}else if(!t.reg.test(d))return n=!1,a.fn.witchValidate.addTips(i,"errMsg"),void 0;t.url&&(i.removeClass("witchajax").addClass("witchajax"),a.ajax({type:"POST",url:t.url,data:i.attr("name")+"="+d,dataType:"json",success:function(t){"true"!=t.state&&a.fn.witchValidate.addTips(i,"errMsg"),n&&a.fn.witchValidate.removeTips(i),i.removeClass("witchajax")},error:function(){a.fn.witchValidate.addTips(i,"errMsg")}}))}return n&&a.fn.witchValidate.removeTips(i),n}var n={ajaxFunc:void 0},r={mail:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,china:/^[\u0391-\uFFE5]+$/,"int":/^\d+$/,qq:/^[1-9]*[1-9][0-9]*$/,phone:/^[1]([3]|[4]|[5]|[8])[0-9]{9}$/,user:/^[a-zA-Z][a-zA-Z0-9_]{4,15}$/,post:/[1-9]d{5}(?!d)/,url:/^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^\"\"])*$/,idcard:/^\d{15}(\d{2}[A-Za-z0-9])?$/,ip:/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g},i=a.extend(n,i),d=this,s=i.fields;t();var c=d.find(":submit");c.bind("click",function(){return!1}),c.click(function(){var t=!0,n="";for(var r in s){var f=s[r],u=a(r);n+=u.attr("name")+"="+u.val()+"&",f.focusMsg&&f.errMsg&&(e(u)||(t=!1))}if(t)var l=setInterval(function(){0===d.find(".witchajax").length&&(clearInterval(l),alert(typeof i.ajaxFun),"function"==typeof i.ajaxFun?i.ajaxFun():"object"==typeof i.ajaxFun?a.ajax({type:"POST",url:i.ajaxFun.url,data:n,success:i.ajaxFun.success,error:i.ajaxFun.error}):(c.unbind("click"),c.bind("click",function(){return!0}),c.click()))},50)})},a.fn.witchValidate.addTips=function(i,t){a.fn.witchValidate.removeTips(i);var e=i.parent(),n='<div id="'+i.attr("id").replace("#","")+'-validate" class="f-validatetips f-validatetips-right">'+i.data("validate")[t]+"</div>";-1==t.indexOf("focus")&&(n=n.replace("f-validatetips-right","f-validatetips-error")),e.append(n)},a.fn.witchValidate.removeTips=function(i){a("#"+i.attr("id")+"-validate").fadeIn("fast",function(){this.remove()})}}(jQuery);